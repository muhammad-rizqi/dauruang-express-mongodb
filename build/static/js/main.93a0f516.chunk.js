(this["webpackJsonpdauruang-admin"]=this["webpackJsonpdauruang-admin"]||[]).push([[0],{31:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t(1),n=t.n(s),r=t(17),l=t.n(r),i=(t(31),t(3)),o=t(4),d=t(6),j=t(7),b=t(8),h=t.n(b),m=t(13),u=function(){try{var e=localStorage.getItem("token");if(null!==e)return e}catch(a){console.log(a)}},p=function(){var e=Object(m.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.removeItem("token"),console.log("Done. delete token")}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){var a;return e&&(a=e,localStorage.setItem("token",a)),console.log("storing to redux"),{type:"CHANGE",data:e}},x=function(){return p(),{type:"CLEAR"}},f=function(e){return{type:"SET_USER",data:e}},g=t(2),v=t(15),N={saldo:{loading:!0,data:0,error:!1},penyetoran:{loading:!0,data:[],error:null},penarikan:{loading:!0,data:[],error:null},penjemputan:{loading:!0,data:[],error:null},user:{loading:!0,data:[],error:null}},k={penyetoran:{loading:!0,data:[],error:null},penjemputan:{loading:!0,data:[],error:null}},y={saldo:{loading:!0,data:0,error:!1},penjualan:{loading:!0,data:[],error:null},stok:{loading:!0,data:[],error:null}},S=Object(v.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return a.data;case"CHANGE_ID":return Object(g.a)(Object(g.a)({},e),{},{id:a.data.id});case"CLEAR":return null;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CHANGE":return a.data;case"CLEAR":return null;default:return e}},nasabah:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_SALDO":return Object(g.a)(Object(g.a)({},e),{},{saldo:a.data});case"SET_PENJEMPUTAN":return Object(g.a)(Object(g.a)({},e),{},{penjemputan:a.data});case"SET_PENARIKAN":return Object(g.a)(Object(g.a)({},e),{},{penarikan:a.data});case"SET_PENYETORAN":return Object(g.a)(Object(g.a)({},e),{},{penyetoran:a.data});case"SET_NASABAH":return Object(g.a)(Object(g.a)({},e),{},{user:a.data});default:return e}},penyetor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_DATA_PENJEMPUTAN":return Object(g.a)(Object(g.a)({},e),{},{penjemputan:a.data});case"SET_DATA_PENYETORAN":return Object(g.a)(Object(g.a)({},e),{},{penyetoran:a.data});default:return e}},penjual:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_PENJUAL_SALDO":return Object(g.a)(Object(g.a)({},e),{},{saldo:a.data});case"SET_PENJUALAN":return Object(g.a)(Object(g.a)({},e),{},{penjualan:a.data});case"SET_STOK":return Object(g.a)(Object(g.a)({},e),{},{stok:a.data});default:return e}}}),w=Object(v.c)(S,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),E="https://dauruang.serverdakwah.online/api",T=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=w.getState(),n=s.token,r=new Headers;r.append("Accept","application/json"),!c&&r.append("Content-Type","application/json"),null!==n&&r.append("Authorization","Bearer "+n);var l=fetch(E+a,{method:e,headers:r,body:"GET"===e?null:c?t:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return e.message&&"Token"===e.message.split(" ")[0]&&w.dispatch(x()),console.log(e),e})).catch((function(e){console.log(e),alert(e.message)}));return l},D=function(){return T("GET","/profile")},A=function(e){return{type:"SET_PENARIKAN",data:e}},_=function(e){return{type:"SET_PENYETORAN",data:e}},P=function(e){return{type:"SET_NASABAH",data:e}},C=function(){var e={loading:!0,data:[],error:!1};w.dispatch(P(e)),T("GET","/users/").then((function(a){200===a.code?e.data=a.data:e.error=a.error})).catch((function(a){return e.error=a.message})).finally((function(){e.loading=!1,w.dispatch(P(e))}))},F=function(e){return{type:"SET_PENJUAL_SALDO",data:e}},I=function(e){return{type:"SET_PENJUALAN",data:e}},L=function(e){return{type:"SET_STOK",data:e}},U=function(){var e={loading:!0,data:[],error:!1};w.dispatch(I(e)),T("GET","/penjualan").then((function(a){200===a.code?e.data=a.data:e.error=a.error})).catch((function(a){return e.error=a.message})).finally((function(){e.loading=!1,w.dispatch(I(e))}))},G=function(){var e={loading:!0,data:[],error:!1};w.dispatch(L(e)),T("GET","/stok").then((function(a){200===a.code?e.data=a.data:e.error=a.error})).catch((function(a){return e.error=a.message})).finally((function(){e.loading=!1,w.dispatch(L(e))}))},B=function(){var e={loading:!0,data:0,error:!1};w.dispatch(F(e)),T("GET","/penjualan/saldo").then((function(a){200===a.code?e.data=a.data.saldo:e.error=a.error})).catch((function(a){return e.error=a.message})).finally((function(){e.loading=!1,w.dispatch(F(e))}))},J=function(e){return{type:"SET_DATA_PENYETORAN",data:e}},H=function(){var e={loading:!0,data:[],error:!1};w.dispatch(J(e)),T("GET","/penyetoran").then((function(a){200===a.code?e.data=a.data:e.error=a.error})).catch((function(a){return e.error=a.message})).finally((function(){e.loading=!1,w.dispatch(J(e))}))};var K=function(e){var a=e.history,t=Object(s.useState)(""),n=Object(i.a)(t,2),r=n[0],l=n[1],j=Object(s.useState)(""),b=Object(i.a)(j,2),h=b[0],m=b[1],p=Object(s.useState)(!1),x=Object(i.a)(p,2),g=x[0],v=x[1],N=Object(o.b)(),k=function(e){v(!0),function(e,a){return T("POST","/login",{email:e,password:a})}(r,h).then((function(e){200===e.code?4!==e.data.user.role&&999!==e.data.user.role||(4===e.data.user.role?a.push("/bendahara"):999===e.data.user.role?a.push("/admin/"):alert("Mohon masuk di perangkat mobile"),N(O(e.data.token)),N(f(e.data.user)),y()):alert("Gagal Login"),v(!1)})).catch((function(e){alert(e.message),v(!1)})),e.preventDefault()},y=function(){B(),U(),H(),G(),C()};return Object(c.jsxs)("div",{className:"form-screen",children:[Object(c.jsxs)("a",{href:"index.html",className:"easion-logo",children:[Object(c.jsx)("i",{className:"fas fa-sun"})," ",Object(c.jsx)("span",{children:"Daur uang"})]}),Object(c.jsxs)("div",{className:"card account-dialog",children:[Object(c.jsx)("div",{className:"card-header bg-primary text-white",children:"Please sign in"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{action:"#!",children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email",onInput:function(e){return l(e.target.value)}})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",onInput:function(e){return m(e.target.value)}})}),Object(c.jsxs)("div",{className:"account-dialog-actions",children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return k(e)},disabled:g,children:g?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{class:"spinner-grow spinner-grow-sm"}),"Signing in"]}):"Sign in"}),Object(c.jsx)(d.b,{className:"account-dialog-link",to:"/register/",onClick:function(e){console.log(u()),e.preventDefault()},children:"Create an acoount"})]})]})})]})]})};var R=function(){return Object(c.jsxs)("div",{className:"form-screen",children:[Object(c.jsxs)("a",{href:"index.html",className:"easion-logo",children:[Object(c.jsx)("i",{className:"fas fa-sun"})," ",Object(c.jsx)("span",{children:"Daur uang"})]}),Object(c.jsxs)("div",{className:"card account-dialog",children:[Object(c.jsx)("div",{className:"card-header bg-primary text-white",children:"Register"}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{action:"#!",children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})}),Object(c.jsxs)("div",{className:"account-dialog-actions",children:[Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Sign up"}),Object(c.jsx)(d.b,{className:"account-dialog-link",to:"/login/",children:"Already have an account?"})]})]})})]})]})},M=function(e,a,t,c,s){var n={nama_lengkap:a,email:t,telepon:c,lokasi:JSON.stringify(Object(g.a)(Object(g.a)({},s),{},{latitude:parseFloat(s.latitude),longitude:parseFloat(s.longitude)}))};return T("PATCH","/users/"+e,n)},Y=function(e,a,t,c,s){return T("PATCH","/users/"+e,{nama_lengkap:a,email:t,telepon:c,role:s})},X=function(e,a,t,c,s){return T("POST","/register",{nama_lengkap:e,email:a,password:s,telepon:t,role:c,lokasi:'{"place_id":"ChIJAAAAAAAAAAARpkoFa3gE2KE","name":"Pondok Programmer","latitude":-7.9965072,"longitude":110.2951867}'})},z=function(e){return T("DELETE","/users/".concat(e))},V=function(){var e=Object(o.c)((function(e){return e})).nasabah.user.data,a=Object(s.useState)(),t=Object(i.a)(a,2),n=t[0],r=t[1],l=Object(s.useState)(!1),d=Object(i.a)(l,2),j=d[0],b=d[1],u=Object(s.useState)(""),p=Object(i.a)(u,2),O=p[0],x=p[1],f=Object(s.useState)(""),v=Object(i.a)(f,2),N=v[0],k=v[1],y=Object(s.useState)(""),S=Object(i.a)(y,2),w=S[0],E=S[1],T=Object(s.useState)(1),D=Object(i.a)(T,2),A=D[0],_=D[1],P=Object(s.useState)(""),F=Object(i.a)(P,2),I=F[0],L=F[1],U=function(){var e=Object(m.a)(h.a.mark((function e(a){var t,c,s,r,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.id,c=n.name,s=n.email,r=n.phone,!(l=n.role)){e.next=17;break}return b(!0),e.prev=3,e.next=6,Y(t,c,s,r,l);case 6:200===e.sent.code?(b(!1),alert("Berhasil diupdate"),C()):alert("Gagal diupdate"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),alert("Kesalahan koneksi"),b(!1);case 15:e.next=18;break;case 17:alert("Harap isi dengan benar");case 18:a.preventDefault();case 19:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(a){return e.apply(this,arguments)}}(),G=function(){var e=Object(m.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I){e.next=16;break}return b(!0),e.prev=2,e.next=5,X(O,N,w,A,I);case 5:201===e.sent.code?(alert("Berhasil membuat user baru"),b(!1),C()):alert("Gagal membuat user baru"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),alert("Kesalahan koneksi"),b(!1);case 14:e.next=17;break;case 16:alert("Harap isi dengan benar");case 17:a.preventDefault();case 18:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(a){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,z(a);case 4:200===e.sent.code?(alert("Berhasil menghapus"),b(!1),C()):alert("Gagal menghapus"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),alert("Kesalahan koneksi"),b(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(a){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"card table-responsive-md easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Create User"})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nama-lengkap",children:"Nama Lengkap"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"nama-lengkap",placeholder:"Masukkan Nama Lengkap",value:O,onInput:function(e){x(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"alamatEmail",children:"Alamat email"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"alamatEmail",placeholder:"nama@example.com",value:N,onInput:function(e){k(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"telepon",children:"Nomor Telepon"}),Object(c.jsx)("input",{type:"phone",className:"form-control",id:"telepon",placeholder:"08123456789",value:w,onInput:function(e){E(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"exampleFormControlSelect1",children:"Role"}),Object(c.jsxs)("select",{className:"form-control",id:"exampleFormControlSelect1",value:A,onChange:function(e){_(e.target.value),e.preventDefault()},children:[Object(c.jsx)("option",{value:"1",children:"Nasabah"}),Object(c.jsx)("option",{value:"2",children:"Pengurus Penyetoran"}),Object(c.jsx)("option",{value:"3",children:"Pengurus Penjualan"}),Object(c.jsx)("option",{value:"4",children:"Bendahara"}),Object(c.jsx)("option",{value:"999",children:"Admin"})]})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"08123456789",value:I,onInput:function(e){L(e.target.value),e.preventDefault()}})]}),Object(c.jsx)("button",{className:"btn btn-primary",disabled:j,onClick:G,children:j?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Creating"]}):"Create"})]})})]}),n&&Object(c.jsx)("div",{className:"modal fade",id:"myModal",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"Edit User"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nama-lengkap",children:"Nama Lengkap"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"nama-lengkap",placeholder:"Masukkan Nama Lengkap",value:n.name,onInput:function(e){r(Object(g.a)(Object(g.a)({},n),{},{name:e.target.value})),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"alamatEmail",children:"Alamat email"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"alamatEmail",placeholder:"nama@example.com",value:n.email,onInput:function(e){r(Object(g.a)(Object(g.a)({},n),{},{email:e.target.value})),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"telepon",children:"Nomor Telepon"}),Object(c.jsx)("input",{type:"phone",className:"form-control",id:"telepon",placeholder:"08123456789",value:n.phone,onInput:function(e){r(Object(g.a)(Object(g.a)({},n),{},{phone:e.target.value})),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"exampleFormControlSelect1",children:"Role"}),Object(c.jsxs)("select",{className:"form-control",id:"exampleFormControlSelect1",value:n.role,onChange:function(e){console.log(e.target.value),r(Object(g.a)(Object(g.a)({},n),{},{role:e.target.value})),e.preventDefault()},children:[Object(c.jsx)("option",{value:"1",children:"Nasabah"}),Object(c.jsx)("option",{value:"2",children:"Pengurus Penyetoran"}),Object(c.jsx)("option",{value:"3",children:"Pengurus Penjualan"}),Object(c.jsx)("option",{value:"4",children:"Bendahara"}),Object(c.jsx)("option",{value:"999",children:"Admin"})]})]}),Object(c.jsx)("button",{className:"btn btn-primary",disabled:j,onClick:U,children:j?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Updating"]}):"Update"})]})})]})})}),Object(c.jsxs)("div",{className:"card table-responsive-md easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data User"})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("table",{className:"table table-hover table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No. "}),Object(c.jsx)("th",{scope:"col",children:"Avatar"}),Object(c.jsx)("th",{scope:"col",children:"Nama Lengkap"}),Object(c.jsx)("th",{scope:"col",children:"Role"}),Object(c.jsx)("th",{scope:"col",children:"Email"}),Object(c.jsx)("th",{scope:"col",children:"Telepon"}),Object(c.jsx)("th",{scope:"col",children:"Lokasi"}),Object(c.jsx)("th",{scope:"col",children:"Aksi"})]})}),Object(c.jsx)("tbody",{children:e.map((function(a,t){var s="";try{s=JSON.parse(a.lokasi).name}catch(n){s=a.lokasi}return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:t+1}),Object(c.jsx)("td",{children:Object(c.jsx)("img",{src:a.avatar,className:"rounded-circle",alt:"Avatar",style:{width:50,height:50}})}),Object(c.jsx)("td",{children:a.nama_lengkap}),Object(c.jsx)("td",{children:1===a.role?"Nasabah":2===a.role?"Pengurus Penyetoran":3===a.role?"Pengurus Penjualan":4===a.role?"Bendahara":"Super Admin"}),Object(c.jsx)("td",{children:a.email}),Object(c.jsx)("td",{children:a.telepon}),Object(c.jsx)("td",{children:s}),Object(c.jsxs)("td",{children:[Object(c.jsx)("span",{className:"btn btn-secondary m-1","data-toggle":"modal","data-target":"#myModal",onClick:function(a){!function(a){r({id:e[a].id,name:e[a].nama_lengkap,email:e[a].email,phone:e[a].telepon,role:e[a].role})}(t),a.preventDefault()},children:Object(c.jsx)("i",{className:"fas fa-edit"})}),Object(c.jsx)("span",{className:"btn btn-danger m-1",onClick:function(e){B(a.id),e.preventDefault()},children:Object(c.jsx)("i",{className:"fas fa-trash"})})]})]})}))})]})})]})]})},Z=function(){var e=Object(o.c)((function(e){return e})).penjual,a=Object(o.c)((function(e){return e.nasabah})).user,t=!a.loading&&a.data.length;return Object(c.jsxs)("div",{className:"row dash-row",children:[Object(c.jsx)("div",{className:"col-xl-4",children:Object(c.jsxs)("div",{className:"stats stats-primary",children:[Object(c.jsx)("h3",{className:"stats-title",children:" User "}),Object(c.jsxs)("div",{className:"stats-content",children:[Object(c.jsx)("div",{className:"stats-icon",children:Object(c.jsx)("i",{className:"fas fa-user"})}),Object(c.jsx)("div",{className:"stats-data",children:Object(c.jsx)("div",{className:"stats-number",children:a.loading?Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}):t})})]})]})}),Object(c.jsx)("div",{className:"col-xl-4",children:Object(c.jsxs)("div",{className:"stats stats-success ",children:[Object(c.jsx)("h3",{className:"stats-title",children:" Keuangan "}),Object(c.jsxs)("div",{className:"stats-content",children:[Object(c.jsx)("div",{className:"stats-icon",children:Object(c.jsx)("i",{className:"fas fa-money-bill-wave"})}),Object(c.jsx)("div",{className:"stats-data",children:Object(c.jsx)("div",{className:"stats-number",children:e.saldo.loading?Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}):"Rp. "+e.saldo.data})})]})]})}),Object(c.jsx)("div",{className:"col-xl-4",children:Object(c.jsxs)("div",{className:"stats stats-danger",children:[Object(c.jsx)("h3",{className:"stats-title",children:" Kategori sampah "}),Object(c.jsxs)("div",{className:"stats-content",children:[Object(c.jsx)("div",{className:"stats-icon",children:Object(c.jsx)("i",{className:"fas fa-boxes"})}),Object(c.jsx)("div",{className:"stats-data",children:Object(c.jsx)("div",{className:"stats-number",children:e.stok.loading?Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}):e.stok.data.length})})]})]})})]})},q=function(){var e=Object(o.c)((function(e){return e})).penjual,a=Object(s.useState)(!1),t=Object(i.a)(a,2),n=t[0],r=t[1],l=Object(o.c)((function(e){return e})).user,d=Object(s.useState)(""),j=Object(i.a)(d,2),b=j[0],h=j[1],m=Object(s.useState)(""),u=Object(i.a)(m,2),p=u[0],O=u[1],x=Object(s.useState)(""),f=Object(i.a)(x,2),v=f[0],N=f[1],k=Object(s.useState)(null),y=Object(i.a)(k,2),S=y[0],w=y[1],E=e.stok.data,D=function(e){r(!0),function(e){return T("DELETE","/sampah/"+e)}(e).then((function(e){200===e.code?(alert("Berhasil dihapus"),G()):alert(e)})).catch((function(e){return alert(e.message)})).finally((function(){return r(!1)}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Data Sampah"}),999===l.role&&Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-chart-bar"})}),Object(c.jsx)("div",{className:"easion-card-title",children:" Inline Form "})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("form",{className:"form-inline",children:[Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:"name",className:"sr-only",children:"Nama Sampah"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Nama Sampah",value:b,onInput:function(e){h(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group mx-sm-3 mb-2",children:[Object(c.jsx)("label",{htmlFor:"price",className:"sr-only",children:"Harga Sampah"}),Object(c.jsx)("input",{type:"number",className:"form-control",id:"price",min:"1",value:p,onInput:function(e){O(e.target.value),e.preventDefault()},placeholder:"Harga Sampah"})]}),Object(c.jsxs)("div",{className:"form-group mx-sm-3 mb-2",children:[Object(c.jsx)("label",{htmlFor:"stock",className:"sr-only",children:"Jumlah Sampah"}),Object(c.jsx)("input",{type:"number",className:"form-control",id:"stock",min:"0",value:v,onInput:function(e){N(e.target.value),e.preventDefault()},placeholder:"Jumlah Sampah"})]}),Object(c.jsx)("button",{type:"submit",className:"form-group btn btn-primary mb-2",onClick:function(e){var a,t,c;r(!0),(a=b,t=p,c=v,T("POST","/sampah",{nama_kategori:a,harga:t,stok_gudang:c})).then((function(e){200===e.code?(alert("Berhasil ditambahkan"),G(),h(""),O(""),N("")):alert("Gagal ditambahkan")})).catch((function(e){return alert(e.message)})).finally((function(){return r(!1)})),e.preventDefault()},disabled:n,children:n?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Menambah Sampah"]}):"Tambah Sampah"})]})})]}),S&&Object(c.jsx)("div",{className:"modal fade",id:"myModal",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"Edit Sampah"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsxs)("form",{className:"form",children:[Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:"name",className:"sr-only",children:"Nama Sampah"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Nama Sampah",value:S.name,onInput:function(e){w(Object(g.a)(Object(g.a)({},S),{},{name:e.target.value})),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:"price",className:"sr-only",children:"Harga Sampah"}),Object(c.jsx)("input",{type:"number",className:"form-control",id:"price",min:"1",value:S.price,onInput:function(e){w(Object(g.a)(Object(g.a)({},S),{},{price:e.target.value})),e.preventDefault()},placeholder:"Harga Sampah"})]}),Object(c.jsxs)("div",{className:"form-group mb-2",children:[Object(c.jsx)("label",{htmlFor:"stock",className:"sr-only",children:"Jumlah Sampah"}),Object(c.jsx)("input",{type:"number",className:"form-control",id:"stock",min:"0",value:S.stock,onInput:function(e){w(Object(g.a)(Object(g.a)({},S),{},{stock:e.target.value})),e.preventDefault()},placeholder:"Jumlah Sampah"})]}),Object(c.jsx)("button",{type:"submit",className:"form-group btn btn-primary mb-2",onClick:function(e){var a,t,c,s,n=S.id,l=S.name,i=S.price,o=S.stock;r(!0),(a=n,t=l,c=i,s=o,T("PATCH","/sampah/"+a,{nama_kategori:t,harga:c,stok_gudang:s})).then((function(e){200===e.code?(alert("Berhasil diedit"),G()):alert(e)})).catch((function(e){return alert(e.message)})).finally((function(){return r(!1)})),e.preventDefault()},disabled:n,children:n?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Mengubah Sampah"]}):"Ubah Sampah"})]})}),Object(c.jsx)("div",{className:"modal-footer",children:Object(c.jsx)("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",children:"Close"})})]})})})]}),Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data Sampah"})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("table",{className:"table table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No."}),Object(c.jsx)("th",{scope:"col",children:"Jenis Sampah"}),Object(c.jsx)("th",{scope:"col",children:"Harga"}),Object(c.jsx)("th",{scope:"col",children:"Jumlah Stok"}),999===l.role&&Object(c.jsx)("th",{scope:"col",children:"Aksi"})]})}),Object(c.jsx)("tbody",{children:E.map((function(e,a){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:a+1}),Object(c.jsx)("td",{children:e.nama_kategori}),Object(c.jsx)("td",{children:e.harga}),Object(c.jsx)("td",{children:e.stok_gudang}),999===l.role&&Object(c.jsxs)("td",{children:[Object(c.jsx)("span",{className:"btn btn-secondary m-1","data-toggle":"modal","data-target":"#myModal",onClick:function(e){return function(e){w({id:E[e].id,name:E[e].nama_kategori,price:E[e].harga,stock:E[e].stok_gudang})}(a)},children:Object(c.jsx)("i",{className:"fas fa-edit"})}),Object(c.jsx)("span",{className:"btn btn-danger m-1",onClick:function(a){D(e.id),a.preventDefault()},children:Object(c.jsx)("i",{className:"fas fa-trash"})})]})]})}))})]})})]})]})},W=function(){var e=Object(o.c)((function(e){return e})).penjual.penjualan.data;return Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data Penjualan"})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("table",{className:"table table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No."}),Object(c.jsx)("th",{scope:"col",children:"Tanggal"}),Object(c.jsx)("th",{scope:"col",children:"Petugas"}),Object(c.jsx)("th",{scope:"col",children:"Jenis Sampah"}),Object(c.jsx)("th",{scope:"col",children:"Client"}),Object(c.jsx)("th",{scope:"col",children:"Harga Satuan"}),Object(c.jsx)("th",{scope:"col",children:"Berat"}),Object(c.jsx)("th",{scope:"col",children:"Debit"})]})}),Object(c.jsx)("tbody",{children:e.map((function(e,a){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:a+1}),Object(c.jsx)("td",{children:e.tanggal}),Object(c.jsx)("td",{children:e.relation.pengurus.nama_lengkap}),Object(c.jsx)("td",{children:e.relation.jenis_sampah.nama_kategori}),Object(c.jsx)("td",{children:e.client}),Object(c.jsx)("td",{children:e.harga_satuan}),Object(c.jsx)("td",{children:e.berat}),Object(c.jsx)("td",{children:e.debit})]})}))})]})})]})},Q=function(){var e=Object(o.c)((function(e){return e})).penyetor.penyetoran.data;return Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data Penyetoran"})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("table",{className:"table table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No. "}),Object(c.jsx)("th",{scope:"col",children:"Tanggal"}),Object(c.jsx)("th",{scope:"col",children:"Nasabah"}),Object(c.jsx)("th",{scope:"col",children:"Jenis Sampah"}),Object(c.jsx)("th",{scope:"col",children:"Berat"}),Object(c.jsx)("th",{scope:"col",children:"Debit"}),Object(c.jsx)("th",{scope:"col",children:"Saldo"})]})}),Object(c.jsx)("tbody",{children:e.map((function(e,a){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:a+1}),Object(c.jsx)("td",{children:e.tanggal}),Object(c.jsx)("td",{children:e.relation.nasabah.nama_lengkap}),Object(c.jsx)("td",{children:e.relation.jenis_sampah.nama_kategori}),Object(c.jsx)("td",{children:e.berat}),Object(c.jsx)("td",{children:e.debit}),Object(c.jsx)("td",{children:e.saldo})]})}))})]})})]})},$=function(){var e=Object(j.g)(),a=Object(s.useState)(null),t=Object(i.a)(a,2),n=t[0],r=t[1],l=Object(o.c)((function(e){return e})).nasabah,d=Object(o.c)((function(e){return e.user})).role,b=Object(j.h)().userId,h=l.penarikan.data,m=Object(s.useState)("-"),u=Object(i.a)(m,2),p=u[0],O=u[1],x=Object(s.useState)(0),f=Object(i.a)(x,2),g=f[0],v=f[1],N=l.penyetoran.data,k=Object(s.useState)(!1),y=Object(i.a)(k,2),S=y[0],E=y[1],D=Object(j.f)();Object(s.useEffect)((function(){console.log(b),e.state?r(e.state.user):function(e){return T("GET","/users/"+e)}(b).then((function(e){return 200===e.code&&r(e.data.user)})).catch((function(e){return console.log(e)})),function(e){return T("GET","/saldo/"+e)}(b).then((function(e){return 200===e.code&&O(e.data.saldo)})).catch((function(e){return console.log(e)})),function(e){var a={loading:!0,data:[],error:!1};w.dispatch(A(a)),T("GET","/users/"+e+"/penarikan").then((function(e){200===e.code?a.data=e.data:a.error=e.error})).catch((function(e){return a.error=e.message})).finally((function(){a.loading=!1,w.dispatch(A(a))}))}(b),function(e){var a={loading:!0,data:[],error:!1};w.dispatch(_(a)),T("GET","/users/"+e+"/penyetoran").then((function(e){200===e.code?a.data=e.data:a.error=e.error})).catch((function(e){return a.error=e.message})).finally((function(){a.loading=!1,w.dispatch(_(a))}))}(b)}),[e,b]);return Object(c.jsxs)("div",{children:[n&&Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"media p-3",children:[Object(c.jsx)("img",{src:n.avatar,alt:n.nama_lengkap,className:"mr-3 rounded-circle",style:{width:"60px",height:"60px"}}),Object(c.jsxs)("div",{className:"media-body",children:[Object(c.jsx)("h4",{children:n.nama_lengkap}),Object(c.jsxs)("p",{children:[n.email," - ",n.telepon]}),Object(c.jsxs)("p",{children:["Saldo : Rp ",p,",-"]})]})]})}),Object(c.jsx)("div",{className:"p-2",children:Object(c.jsxs)("div",{className:"easion-card-icon",style:{cursor:"pointer"},onClick:function(){return 4===d?D.push("/bendahara/tabungan"):D.push("/admin/tabungan")},children:[Object(c.jsx)("i",{className:"fas fa-arrow-left mr-3"}),"Kembali"]})}),4===d&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{type:"button",className:"btn btn-primary my-3","data-toggle":"modal","data-target":"#myModal",children:"Tarik Tabungan"}),Object(c.jsx)("div",{className:"modal",id:"myModal",children:Object(c.jsx)("div",{className:"modal-dialog",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"Tarik Tabungan"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal",children:"\xd7"})]}),Object(c.jsxs)("div",{className:"modal-body",children:[Object(c.jsxs)("form",{className:"my-3",children:[Object(c.jsx)("label",{htmlFor:"tarik",children:"Jumlah Penarikan"}),Object(c.jsx)("input",{min:"1000",max:p,type:"number",className:"form-control",id:"tarik",placeholder:"1000",value:g,onInput:function(e){v(e.target.value)}})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary mb-2",onClick:function(a){var t,c;g<=p||g>1e3?(E(!0),(t=b,c=g,T("POST","/penarikan",{id_nasabah:t,kredit:c})).then((function(a){200===a.code&&(alert("berhasil"),D.push(e.pathname))})).catch((function(e){alert("gagal"),console.log(e)})).finally((function(){return E(!1)}))):alert("Jumlah Salah"),a.preventDefault()},disabled:S,children:S?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Tarik"]}):"Tarik"})]})]})})})]}),Object(c.jsxs)("ul",{className:"nav nav-tabs",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link active","data-toggle":"tab",href:"#penarikan",children:"Penarikan"})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{className:"nav-link","data-toggle":"tab",href:"#penyetoran",children:"Penyetoran"})})]}),Object(c.jsxs)("div",{className:"tab-content",children:[Object(c.jsx)("div",{className:"tab-pane active",id:"penarikan",children:Object(c.jsxs)("div",{className:"card table-responsive-md easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data Penarikan Nasabah"})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("table",{className:"table table-hover table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No. "}),Object(c.jsx)("th",{scope:"col",children:"ID Penarikan"}),Object(c.jsx)("th",{scope:"col",children:"Tanggal"}),Object(c.jsx)("th",{scope:"col",children:"Kredit"}),Object(c.jsx)("th",{scope:"col",children:"Saldo"})]})}),Object(c.jsx)("tbody",{children:h.map((function(e,a){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:a+1}),Object(c.jsx)("td",{children:Object(c.jsx)("small",{children:e.id})}),Object(c.jsx)("td",{children:e.tanggal}),Object(c.jsx)("td",{children:e.kredit}),Object(c.jsx)("td",{children:e.saldo})]})}))})]})})]})}),Object(c.jsx)("div",{className:"tab-pane fade",id:"penyetoran",children:Object(c.jsxs)("div",{className:"card table-responsive-md easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data Penyetoran Nasabah"})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("table",{className:"table table-hover table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No. "}),Object(c.jsx)("th",{scope:"col",children:"ID Penarikan"}),Object(c.jsx)("th",{scope:"col",children:"Tanggal"}),Object(c.jsx)("th",{scope:"col",children:"Jenis Sampah"}),Object(c.jsx)("th",{scope:"col",children:"Berat"}),Object(c.jsx)("th",{scope:"col",children:"Debit"}),Object(c.jsx)("th",{scope:"col",children:"Saldo"})]})}),Object(c.jsx)("tbody",{children:N.map((function(e,a){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"row",children:a+1}),Object(c.jsx)("td",{children:Object(c.jsx)("small",{children:e.id})}),Object(c.jsx)("td",{children:e.tanggal}),Object(c.jsx)("td",{children:e.relation.jenis_sampah.nama_kategori}),Object(c.jsx)("td",{children:e.berat}),Object(c.jsx)("td",{children:e.debit}),Object(c.jsx)("td",{children:e.saldo})]})}))})]})})]})})]})]})},ee=function(e){var a=e.history,t=Object(o.c)((function(e){return e})).nasabah.user.data,s=Object(j.g)();return console.log(s),Object(c.jsxs)("div",{className:"card table-responsive-md easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-table"})}),Object(c.jsx)("div",{className:"easion-card-title",children:"Data Nasabah"})]}),Object(c.jsx)("div",{className:"card-body",children:Object(c.jsxs)("table",{className:"table table-hover table-in-card",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{scope:"col",children:"No. "}),Object(c.jsx)("th",{scope:"col",children:"ID Nasabah"}),Object(c.jsx)("th",{scope:"col",children:"Avatar"}),Object(c.jsx)("th",{scope:"col",children:"Nama Lengkap"}),Object(c.jsx)("th",{scope:"col",children:"Email"}),Object(c.jsx)("th",{scope:"col",children:"Telepon"}),Object(c.jsx)("th",{scope:"col",children:"Lokasi"})]})}),Object(c.jsx)("tbody",{children:t.filter((function(e){return 1===e.role})).map((function(e,t){var n="";try{n=JSON.parse(e.lokasi).name}catch(r){n=e.lokasi}return Object(c.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return function(e){a.push({pathname:s.pathname+"/"+e.id,state:{user:e}})}(e)},children:[Object(c.jsx)("th",{scope:"row",children:t+1}),Object(c.jsx)("td",{children:Object(c.jsx)("small",{children:e.id})}),Object(c.jsx)("td",{children:Object(c.jsx)("img",{src:e.avatar,className:"rounded-circle",alt:"Avatar",style:{width:50,height:50}})}),Object(c.jsx)("td",{children:e.nama_lengkap}),Object(c.jsx)("td",{children:e.email}),Object(c.jsx)("td",{children:e.telepon}),Object(c.jsx)("td",{children:n})]})}))})]})})]})},ae=function(){var e=Object(o.c)((function(e){return e})).user,a=Object(s.useState)(e.nama_lengkap),t=Object(i.a)(a,2),n=t[0],r=t[1],l=Object(s.useState)(e.email),d=Object(i.a)(l,2),j=d[0],b=d[1],u=Object(s.useState)(e.telepon),p=Object(i.a)(u,2),O=p[0],g=p[1],v=Object(s.useState)(JSON.parse(e.lokasi)),N=Object(i.a)(v,2),k=N[0],y=N[1],S=Object(s.useState)(!1),w=Object(i.a)(S,2),E=w[0],A=w[1],_=Object(s.useState)(""),P=Object(i.a)(_,2),C=P[0],F=P[1],I=Object(s.useState)(""),L=Object(i.a)(I,2),U=L[0],G=L[1],B=Object(s.useState)(""),J=Object(i.a)(B,2),H=J[0],K=J[1],R=Object(s.useState)(""),Y=Object(i.a)(R,2),X=Y[0],z=Y[1],V=Object(s.useState)(""),Z=Object(i.a)(V,2),q=Z[0],W=Z[1],Q=Object(o.b)(),$=Object(s.useState)(),ee=Object(i.a)($,2),ae=ee[0],te=ee[1],ce=Object(s.useState)(!1),se=Object(i.a)(ce,2),ne=se[0],re=se[1],le=function(){var e=Object(m.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:200===(a=e.sent).code&&Q(f(a.data.user));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var a=Object(m.a)(h.a.mark((function a(t){return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!k){a.next=16;break}return A(!0),a.prev=2,a.next=5,M(e.id,n,j,O,k);case 5:200===a.sent.code?(A(!1),le(),alert("Berhasil diupdate")):alert("Gagal diupdate"),a.next=14;break;case 9:a.prev=9,a.t0=a.catch(2),console.log(a.t0),alert("Kesalahan koneksi"),A(!1);case 14:a.next=17;break;case 16:alert("Harap isi dengan benar");case 17:t.preventDefault();case 18:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}(),oe=function(e,a){console.log(a),function(e){console.log("LAT ".concat(e.latitude));var a="https://nominatim.openstreetmap.org/reverse?lat=".concat(e.latitude,"&lon=").concat(e.longitude,"&format=json");return fetch(a,{method:"GET"})}(e).then((function(e){return e.json()})).then((function(e){y({latitude:e.lat,longitude:e.lon,place_id:a?a.placeId:null,name:a?a.name:e.display_name})})).catch((function(e){return console.error(e)}))};return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-chart-bar"})}),Object(c.jsx)("div",{className:"easion-card-title",children:" Update Profile "})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"nama-lengkap",children:"Nama Lengkap"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"nama-lengkap",placeholder:"Masukkan Nama Lengkap",value:n,onInput:function(e){r(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"alamatEmail",children:"Alamat email"}),Object(c.jsx)("input",{type:"email",className:"form-control",id:"alamatEmail",placeholder:"nama@example.com",value:j,onInput:function(e){b(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"telepon",children:"Nomor Telepon"}),Object(c.jsx)("input",{type:"phone",className:"form-control",id:"telepon",placeholder:"08123456789",value:O,onInput:function(e){g(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsxs)("p",{children:["Lokasi : ",k.name]}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(e){return function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){return oe(e.coords)})):alert("Tidak bisa mengambil lokasi"),e.preventDefault()}(e)},children:"Ganti Lokasi"})]}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("iframe",{width:"600",height:"450",frameBorder:"0",style:{border:0},src:"https://www.google.com/maps/embed/v1/search?key=AIzaSyBaixeWDCsjrPYdXBeYZFPpTv0A1G82ZR8&q="+k.latitude+","+k.longitude,allowFullScreen:!0,title:"Gmaps"})}),Object(c.jsx)("button",{className:"btn btn-primary",disabled:E,onClick:ie,children:E?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Updating"]}):"Update"})]})})]}),Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-chart-bar"})}),Object(c.jsx)("div",{className:"easion-card-title",children:" Ubah Kata Sandi "})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"old-password",children:"Kata Sandi Lama"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"old-password",placeholder:"Masukkan Kata Sandi Lama",value:C,onInput:function(e){F(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"new-password",children:"Kata Sandi Baru"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"new-password",placeholder:"Kata Sandi Baru",value:U,onInput:function(e){G(e.target.value),e.preventDefault()}})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"confirm-password",children:"Konfirmasi Kata Sandi"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"confirm-password",placeholder:"Konfirmasi Kata Sandi",value:H,onInput:function(e){K(e.target.value),e.preventDefault()}})]}),Object(c.jsx)("button",{className:"btn btn-primary",disabled:E,onClick:function(a){A(!0),function(e,a,t,c){var s={password:a,new_password:t,password_confirmation:c};return T("PATCH","/users/".concat(e,"/password"),s)}(e.id,C,U,H).then((function(e){200===e.code?(alert("Berhasil merubah password\n Silahkan login kembali"),Q(x())):(alert("Gagal merubah password"),A(!1))})).catch((function(e){A(!1),alert("Gagal menyambung ke server"),console.log(e)})),a.preventDefault()},children:E?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Updating"]}):"Update"})]})})]}),Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-chart-bar"})}),Object(c.jsx)("div",{className:"easion-card-title",children:" Ubah Avatar "})]}),Object(c.jsxs)("div",{className:"card-body ",children:[ne?Object(c.jsx)("img",{alt:"avatar",src:q,style:{width:"200px",height:"200px",borderRadius:"100px"}}):Object(c.jsx)("img",{alt:"avatar",src:e.avatar,style:{width:"200px",height:"200px",borderRadius:"100px"}}),Object(c.jsxs)("form",{children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{className:"mt-3",type:"file",name:"file",onChange:function(e){te(e.target.files[0]),re(!0);var a=new FileReader;a.onloadend=function(e){W([a.result])}}})}),Object(c.jsx)("button",{className:"btn btn-primary",disabled:E,onClick:function(a){A(!0),function(e,a){var t=new FormData;return t.append("avatar",a),T("PATCH","/users/".concat(e,"/avatar"),t,a)}(e.id,ae).then((function(e){200===e.code?(alert("Berhasil merubah avatar"),le()):alert("Gagal merubah avatar"),A(!1)})).catch((function(e){A(!1),alert("Gagal menyambung ke server"),console.log(e)})),a.preventDefault()},children:E?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Updating"]}):"Update Photo Profile"})]})]})]}),Object(c.jsxs)("div",{className:"card easion-card",children:[Object(c.jsxs)("div",{className:"card-header",children:[Object(c.jsx)("div",{className:"easion-card-icon",children:Object(c.jsx)("i",{className:"fas fa-chart-bar"})}),Object(c.jsx)("div",{className:"easion-card-title",children:" Hapus Akun "})]}),Object(c.jsx)("div",{className:"card-body ",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{htmlFor:"delete-account",children:"Masukkan Kata Sandi Untuk Menghapus Akun"}),Object(c.jsx)("input",{type:"password",className:"form-control",id:"delete-account",placeholder:"Masukkan Kata Sandi",value:X,onInput:function(e){z(e.target.value),e.preventDefault()}})]}),Object(c.jsx)("button",{className:"btn btn-primary",disabled:E,onClick:function(a){A(!0),function(e,a){var t={password:a};return T("DELETE","/users/".concat(e),t)}(e.id,X).then((function(e){200===e.code?(alert("Berhasil menghapus akun"),Q(x())):(alert("Periksa password kembali"),A(!1))})).catch((function(e){A(!1),alert("Gagal menyambung ke server"),console.log(e)})),a.preventDefault()},children:E?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-grow spinner-grow-sm"}),"Delete"]}):"Delete"})]})})]})]})},te=function(e){e.history;var a=Object(o.b)(),t=Object(o.c)((function(e){return e})).user,s="/admin";return Object(c.jsx)(d.a,{children:Object(c.jsxs)("div",{className:"dash",children:[Object(c.jsxs)("div",{className:"dash-nav dash-nav-dark",children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("a",{href:"#",className:"menu-toggle",children:Object(c.jsx)("i",{className:"fas fa-bars"})}),Object(c.jsxs)(d.b,{to:s,className:"easion-logo",children:[Object(c.jsx)("i",{className:"fas fa-sun"})," ",Object(c.jsx)("span",{children:"Daur Uang"})]})]}),Object(c.jsxs)("nav",{className:"dash-nav-list",children:[Object(c.jsxs)(d.b,{to:s,className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-home"})," Dashboard"," "]}),Object(c.jsxs)(d.b,{to:s+"/setoran",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-truck-loading"})," Penyetoran Sampah"," "]}),Object(c.jsxs)(d.b,{to:s+"/gudang",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-warehouse"})," Data Sampah"," "]}),Object(c.jsxs)(d.b,{to:s+"/tabungan",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-money-check-alt"})," Tabungan Nasabah"," "]}),Object(c.jsxs)(d.b,{to:s+"/penjualan",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-luggage-cart"})," Penjualan"," "]}),Object(c.jsxs)(d.b,{to:s+"/users",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-user"})," User"," "]})]})]}),Object(c.jsxs)("div",{className:"dash-app",children:[Object(c.jsxs)("header",{className:"dash-toolbar",children:[Object(c.jsx)("a",{href:"#",className:"menu-toggle",children:Object(c.jsx)("i",{className:"fas fa-bars"})}),Object(c.jsxs)("h4",{children:["Selamat datang ",t.nama_lengkap]}),Object(c.jsx)("div",{className:"tools",children:Object(c.jsxs)("div",{className:"dropdown tools-item",children:[Object(c.jsx)("a",{href:"#",className:"",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(c.jsx)("i",{className:"fas fa-user"})}),Object(c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1",children:[Object(c.jsx)(d.b,{to:s+"/profile",className:"dropdown-item",children:"Profile"}),Object(c.jsx)("span",{className:"dropdown-item",style:{cursor:"pointer"},onClick:function(){a(x())},children:"Logout"})]})]})})]}),Object(c.jsx)("main",{className:"dash-content",children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{exact:!0,path:s,component:Z}),Object(c.jsx)(j.a,{exact:!0,path:s+"/setoran",component:Q}),Object(c.jsx)(j.a,{exact:!0,path:s+"/gudang",component:q}),Object(c.jsx)(j.a,{exact:!0,path:s+"/tabungan",component:ee}),Object(c.jsx)(j.a,{exact:!0,path:s+"/tabungan/:userId",component:$}),Object(c.jsx)(j.a,{exact:!0,path:s+"/penjualan",component:W}),Object(c.jsx)(j.a,{exact:!0,path:s+"/profile",component:ae}),Object(c.jsx)(j.a,{exact:!0,path:s+"/users",component:V})]})})})]})]})})},ce=function(e){e.history;var a=Object(o.b)(),t=Object(o.c)((function(e){return e})).user,s="/bendahara";return Object(c.jsx)(d.a,{children:Object(c.jsxs)("div",{className:"dash",children:[Object(c.jsxs)("div",{className:"dash-nav dash-nav-dark",children:[Object(c.jsxs)("header",{children:[Object(c.jsx)("a",{href:"#",className:"menu-toggle",children:Object(c.jsx)("i",{className:"fas fa-bars"})}),Object(c.jsxs)(d.b,{to:s,className:"easion-logo",children:[Object(c.jsx)("i",{className:"fas fa-sun"})," ",Object(c.jsx)("span",{children:"Daur Uang"})]})]}),Object(c.jsxs)("nav",{className:"dash-nav-list",children:[Object(c.jsxs)(d.b,{to:s,className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-home"})," Dashboard"," "]}),Object(c.jsxs)(d.b,{to:s+"/setoran",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-truck-loading"})," Penyetoran Sampah"," "]}),Object(c.jsxs)(d.b,{to:s+"/gudang",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-warehouse"})," Data Sampah"," "]}),Object(c.jsxs)(d.b,{to:s+"/tabungan",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-money-check-alt"})," Tabungan Nasabah"," "]}),Object(c.jsxs)(d.b,{to:s+"/penjualan",className:"dash-nav-item",children:[Object(c.jsx)("i",{className:"fas fa-luggage-cart"})," Penjualan"," "]})]})]}),Object(c.jsxs)("div",{className:"dash-app",children:[Object(c.jsxs)("header",{className:"dash-toolbar",children:[Object(c.jsx)("a",{href:"#",className:"menu-toggle",children:Object(c.jsx)("i",{className:"fas fa-bars"})}),Object(c.jsxs)("h4",{children:["Selamat datang ",t.nama_lengkap]}),Object(c.jsx)("div",{className:"tools",children:Object(c.jsxs)("div",{className:"dropdown tools-item",children:[Object(c.jsx)("a",{href:"#",className:"",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(c.jsx)("i",{className:"fas fa-user"})}),Object(c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenu1",children:[Object(c.jsx)(d.b,{to:s+"/profile",className:"dropdown-item",children:"Profile"}),Object(c.jsx)("span",{className:"dropdown-item",style:{cursor:"pointer"},onClick:function(){a(x())},children:"Logout"})]})]})})]}),Object(c.jsx)("main",{className:"dash-content",children:Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{exact:!0,path:s,component:Z}),Object(c.jsx)(j.a,{exact:!0,path:s+"/setoran",component:Q}),Object(c.jsx)(j.a,{exact:!0,path:s+"/gudang",component:q}),Object(c.jsx)(j.a,{exact:!0,path:s+"/tabungan",component:ee}),Object(c.jsx)(j.a,{exact:!0,path:s+"/tabungan/:userId",component:$}),Object(c.jsx)(j.a,{exact:!0,path:s+"/penjualan",component:W}),Object(c.jsx)(j.a,{exact:!0,path:s+"/profile",component:ae})]})})})]})]})})},se=function(){var e=Object(o.b)(),a=Object(s.useState)(!0),t=Object(i.a)(a,2),n=t[0],r=t[1],l=Object(o.c)((function(e){return e})),b=l.token,h=l.user,m=function(){B(),U(),H(),G(),C()};return Object(s.useEffect)((function(){var a=u();console.log(a),void 0!==a||""===a?(e(O(a)),D().then((function(a){200===a.code&&(4===a.data.user.role||999===a.data.user.role?(e(f(a.data.user)),m()):alert("Harap masuk di pernagkat mobile")),r(!1),console.log(a)})).catch((function(e){console.log(e),alert(e),r(!1)}))):r(!1)}),[]),n?Object(c.jsx)("h1",{children:"Loading..."}):null===b||""===b?Object(c.jsx)(d.a,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/login",exact:!0,component:K}),Object(c.jsx)(j.a,{exact:!0,path:"/register/",component:R}),Object(c.jsx)(j.a,{exact:!0,path:"*",children:Object(c.jsx)("h1",{children:"404"})})]})}):4===h.role?Object(c.jsx)(ce,{}):999===h.role?Object(c.jsx)(te,{}):Object(c.jsx)("h1",{children:"403"})};var ne=function(){return Object(c.jsx)(o.a,{store:w,children:Object(c.jsx)(se,{})})},re=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,39)).then((function(a){var t=a.getCLS,c=a.getFID,s=a.getFCP,n=a.getLCP,r=a.getTTFB;t(e),c(e),s(e),n(e),r(e)}))};l.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(ne,{})}),document.getElementById("root")),re()}},[[38,1,2]]]);
//# sourceMappingURL=main.93a0f516.chunk.js.map